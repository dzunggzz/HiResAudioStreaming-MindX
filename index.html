<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tidal clone lol</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="./kuromoji/build/kuromoji.js"></script>
    <script type="module" src="./am-lyrics/dist/src/am-lyrics.js"></script>
    <link rel="stylesheet" href="./styles/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://resources.tidal.com">
    <style>
        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }

            100% {
                background-position: 200% 0;
            }
        }

        .animate-shimmer {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.03) 25%, rgba(255, 255, 255, 0.08) 50%, rgba(255, 255, 255, 0.03) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        .mask-gradient-b {
            mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>

<body class="bg-gray-900 text-white min-h-screen">
    <main class="container mx-auto px-4 py-8 max-w-6xl">
        <header class="py-8 text-center relative">
            <div class="mb-4 flex items-end justify-center gap-2">
                <h2
                    class="bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-[1.875rem]/[2.5rem] sm:text-[3rem]/[4rem] font-semibold text-transparent">
                    HiResAudioStreaming
                </h2>
            </div>
            <p class="mx-auto max-w-2xl text-xl text-gray-400">
                Try some Touhou music if you don't know what to listen to!
            </p>
            <button id="openSettingsBtn"
                class="cursor-pointer absolute top-4 right-4 flex items-center gap-2 rounded-full transition-colors bg-gray-800 hover:bg-gray-700 text-white border border-white/10 shadow-lg p-2"
                title="Settings">
                <div class="w-4 h-4 flex items-center justify-center">
                    <i data-lucide="settings" class="w-4 h-4"></i>
                </div>
                <span class="hidden sm:inline text-xs sm:text-sm font-semibold">Settings</span>
            </button>

            <div id="settingsDropdown"
                class="absolute top-16 right-4 w-80 z-50 bg-gray-900 rounded-xl border border-white/10 shadow-2xl hidden transform transition-all duration-200 origin-top-right scale-95 opacity-0 overflow-hidden">
                <div class="max-h-[80vh] overflow-y-auto custom-scrollbar">
                    <div class="px-4 py-3 bg-white/5 border-b border-white/5 flex items-center gap-3">
                        <div
                            class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white shadow-lg shadow-blue-500/30">
                            <i data-lucide="user" class="w-5 h-5"></i>
                        </div>
                        <div class="text-left min-w-0 flex-1">
                            <div class="text-sm font-bold text-white truncate" id="settingsPcUsername">Guest User</div>
                            <div class="text-xs text-gray-400 truncate" id="settingsPcEmail">Free Account</div>
                        </div>
                    </div>

                    <div class="p-2 space-y-1">
                        <div class="px-3 py-2 text-[10px] font-bold text-gray-500 uppercase tracking-widest">Audio</div>

                        <div class="px-3 py-2">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center gap-2 text-gray-300">
                                    <i data-lucide="activity" class="w-4 h-4"></i>
                                    <span class="text-sm">Crossfade</span>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="settingsCrossfadeToggle" class="sr-only peer">
                                    <div
                                        class="w-9 h-5 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600">
                                    </div>
                                </label>
                            </div>
                            <div class="flex items-center gap-2 pl-6">
                                <input type="range" id="settingsCrossfadeSlider" min="0" max="12000" step="100"
                                    class="flex-1 h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-500">
                                <div class="relative">
                                    <input type="number" id="settingsCrossfadeInput" value="0"
                                        class="w-12 bg-black/40 border border-white/10 rounded text-[10px] text-center py-0.5 text-white focus:outline-none focus:border-blue-500 bg-transparent font-mono">
                                </div>
                            </div>
                        </div>

                        <div class="h-px bg-white/5 my-1"></div>

                        <div class="px-3 py-2 text-[10px] font-bold text-gray-500 uppercase tracking-widest">Interface
                        </div>

                        <button id="settingsKeyboardBtn"
                            class="cursor-pointer w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-lg transition-colors text-left">
                            <i data-lucide="keyboard" class="w-4 h-4"></i>
                            <span>Shortcuts</span>
                        </button>

                        <div class="h-px bg-white/5 my-1"></div>

                        <div class="px-3 py-2 text-[10px] font-bold text-gray-500 uppercase tracking-widest">Experiments
                        </div>

                        <label
                            class="flex items-center justify-between px-3 py-2 hover:bg-white/5 cursor-pointer rounded-lg transition-colors">
                            <div class="flex flex-col">
                                <div class="flex items-center gap-3 text-gray-300">
                                    <i data-lucide="languages" class="w-4 h-4"></i>
                                    <span class="text-sm">Romanization</span>
                                </div>
                                <span class="text-[10px] text-gray-500 pl-7">Romaji subtitles for JP songs</span>
                            </div>
                            <input type="checkbox" id="romanizationToggle" class="sr-only peer">
                            <div
                                class="relative w-9 h-5 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600">
                            </div>
                        </label>

                        <div class="h-px bg-white/5 my-1"></div>

                        <button id="settingsLogoutBtn"
                            class="cursor-pointer w-full flex items-center gap-3 px-3 py-2 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors text-left mt-1">
                            <i data-lucide="log-out" class="w-4 h-4"></i>
                            <span>Log Out</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>



        <div class="w-full">
            <div class="mb-6">
                <div
                    class="search-glass rounded-lg border shadow-sm transition-colors focus-within:border-blue-500 py-2 px-3 pr-2">
                    <div class="flex gap-2 flex-row sm:items-center sm:justify-between">
                        <div class="flex min-w-0 flex-1 items-center gap-2">
                            <input id="searchInput" type="text" placeholder="Search for anything!"
                                class="w-full min-w-0 flex-1 border-none p-0 pl-1 bg-transparent text-white placeholder:text-gray-400 focus:outline-none ring-0"
                                aria-label="Search input" />
                        </div>
                        <div class="flex gap-2 w-auto flex-row items-center">
                            <button id="searchBtn"
                                class="search-button h-full flex items-center justify-center gap-2 rounded-md px-3 py-2 text-sm font-semibold text-white transition-colors"
                                aria-label="Search">
                                <i data-lucide="search" style="width: 16px; height: 16px"></i>
                                <span class="hidden sm:inline">Search</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <nav class="mb-6 flex gap-2 overflow-x-auto scrollbar-hide border-b border-gray-700 svelte-14p3n6n"
                role="tablist">
                <button id="trackSearchTab"
                    class="flex cursor-pointer items-center gap-2 border-b-2 px-3 sm:px-4 py-2 transition-colors whitespace-nowrap border-blue-500 text-blue-500 svelte-14p3n6n"
                    role="tab" aria-selected="true" aria-label="Search tracks">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 18V5l12-2v13"></path>
                        <circle cx="6" cy="18" r="3"></circle>
                        <circle cx="18" cy="16" r="3"></circle>
                    </svg>
                    <span class="text-sm sm:text-base">Tracks</span>
                </button>
                <button id="artistSearchTab"
                    class="flex cursor-pointer items-center gap-2 border-b-2 px-3 sm:px-4 py-2 transition-colors whitespace-nowrap border-transparent text-gray-300 hover:text-white svelte-14p3n6n"
                    role="tab" aria-selected="false" aria-label="Search artists">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide-icon lucide lucide-user">
                        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                        <circle cx="12" cy="7" r="4" />
                    </svg>
                    <span class="text-sm sm:text-base">Artists</span>
                </button>
                <button id="albumSearchTab"
                    class="flex cursor-pointer items-center gap-2 border-b-2 px-3 sm:px-4 py-2 transition-colors whitespace-nowrap border-transparent text-gray-300 hover:text-white svelte-14p3n6n"
                    role="tab" aria-selected="false" aria-label="Search albums">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide-icon lucide lucide-disc">
                        <circle cx="12" cy="12" r="10" />
                        <circle cx="12" cy="12" r="3" />
                    </svg>
                    <span class="text-sm sm:text-base">Albums</span>
                </button>
                <button id="myPlaylistTab"
                    class="flex cursor-pointer items-center gap-2 border-b-2 px-3 sm:px-4 py-2 transition-colors whitespace-nowrap border-transparent text-gray-300 hover:text-white svelte-14p3n6n"
                    role="tab" aria-selected="false" aria-label="My playlists">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide-icon lucide lucide-list">
                        <line x1="8" y1="6" x2="21" y2="6"></line>
                        <line x1="8" y1="12" x2="21" y2="12"></line>
                        <line x1="8" y1="18" x2="21" y2="18"></line>
                        <line x1="3" y1="6" x2="3.01" y2="6"></line>
                        <line x1="3" y1="12" x2="3.01" y2="12"></line>
                        <line x1="3" y1="18" x2="3.01" y2="18"></line>
                    </svg>
                    <span class="text-sm sm:text-base">My Playlists</span>
                </button>
                <button id="favoritesTab"
                    class="flex cursor-pointer items-center gap-2 border-b-2 px-3 sm:px-4 py-2 transition-colors whitespace-nowrap border-transparent text-gray-300 hover:text-white svelte-14p3n6n"
                    role="tab" aria-selected="false" aria-label="View favorites">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                    </svg>
                    <span class="text-sm sm:text-base">Favorites</span>
                </button>
            </nav>

            <section id="resultsContainer">
                <div id="resultsGrid" class="flex flex-col gap-1">
                </div>
            </section>
        </div>
    </main>

    </main>

    <div id="artistPage"
        class="fixed inset-0 z-[60] bg-gray-900 overflow-y-auto hidden transition-transform duration-300 ease-in-out transform translate-y-full">
        <div class="container mx-auto px-4 py-8 max-w-7xl space-y-6 pb-48 lg:pb-64">
            <div class="w-12 h-1.5 bg-white/20 rounded-full mx-auto mb-6 md:hidden"></div>
            <button id="closeArtistPageBtn"
                class="flex items-center gap-2 text-gray-400 transition-colors hover:text-white mb-2 cursor-pointer">
                <i data-lucide="arrow-left" style="width: 20px; height: 20px"></i>
                Back
            </button>

            <div class="flex flex-col items-start gap-8 md:flex-row md:items-end">
                <div
                    class="aspect-square w-full flex-shrink-0 overflow-hidden rounded-full bg-gray-800 shadow-2xl md:w-80">
                    <img id="artistPageImage" src="https://placehold.co/320x320" alt="Artist"
                        class="h-full w-full object-cover" loading="lazy" decoding="async" />
                </div>

                <div class="flex-1 w-full">
                    <p class="mb-2 text-sm text-gray-400 font-medium">ARTIST</p>
                    <h1 id="artistPageName" class="mb-4 text-4xl font-bold md:text-6xl text-white">Artist Name</h1>

                    <div class="flex items-center gap-3 mb-6">
                        <button id="playArtistPageBtn"
                            class="flex items-center gap-2 rounded-full bg-blue-500 px-8 py-3 font-semibold text-white transition-transform hover:scale-105 hover:bg-blue-400 active:scale-95 shadow-lg shadow-blue-500/20 cursor-pointer">
                            <i data-lucide="play" class="fill-current" style="width: 20px; height: 20px"></i>
                            Play
                        </button>
                        <button id="shuffleArtistPageBtn"
                            class="flex items-center gap-2 rounded-full border border-purple-500/30 px-6 py-3 text-sm font-semibold text-purple-300 transition-colors hover:border-purple-400 hover:text-purple-200 cursor-pointer">
                            <i data-lucide="shuffle" style="width: 18px; height: 18px"></i>
                            Shuffle
                        </button>
                    </div>

                    <div id="artistPageRoles" class="flex flex-wrap items-center gap-2 mb-6">

                    </div>
                </div>
            </div>


            <div class="space-y-12">

                <section>
                    <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-6">
                        <div>
                            <h2 class="text-2xl font-semibold text-white">Top Tracks</h2>
                            <p class="text-sm text-gray-400" id="artistTopTracksInfo">Best songs from this artist.</p>
                        </div>
                    </div>


                    <div class="rounded-2xl border border-gray-800 bg-gray-900/40 p-4">
                        <div id="artistTopTracksGrid" class="flex flex-col gap-1">

                        </div>
                        <div id="artistTopTracksPagination" class="mt-4 flex justify-center gap-2"></div>
                    </div>
                </section>

                <section>
                    <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-6">
                        <div>
                            <h2 class="text-2xl font-semibold text-white">Discography</h2>
                            <p class="text-sm text-gray-400">Albums, EPs, and singles.</p>
                        </div>
                    </div>

                    <div id="artistDiscographyGrid"
                        class="flex overflow-x-auto gap-4 snap-x hide-scrollbar md:grid md:gap-4 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-5 md:overflow-visible">

                        <div
                            class="col-span-full py-12 text-center text-gray-500 bg-gray-900/20 rounded-xl border border-gray-800 border-dashed">
                            Discography WIP
                        </div>
                    </div>
                    <div id="artistDiscographyPagination" class="mt-8 flex justify-center gap-2"></div>
                </section>
            </div>
        </div>
    </div>


    <div id="playlistPage"
        class="fixed inset-0 z-[60] bg-gray-900 overflow-y-auto hidden transition-transform duration-300 ease-in-out transform translate-y-full">
        <div class="container mx-auto px-4 py-8 max-w-7xl space-y-6 pb-48 lg:pb-64">

            <div class="w-12 h-1.5 bg-white/20 rounded-full mx-auto mb-6 md:hidden"></div>
            <div class="flex items-center justify-between mb-2">
                <button id="closePlaylistPageBtn"
                    class="flex items-center gap-2 text-gray-400 transition-colors hover:text-white cursor-pointer">
                    <i data-lucide="arrow-left" style="width: 20px; height: 20px"></i>
                    Back
                </button>

                <button id="deletePlaylistPageBtn"
                    class="flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium text-red-400 bg-red-500/10 hover:bg-red-500/20 transition-colors cursor-pointer">
                    <i data-lucide="trash-2" style="width: 16px; height: 16px"></i>
                    Delete Playlist
                </button>
            </div>

            <div class="flex flex-col items-start gap-8 md:flex-row md:items-end">
                <div
                    class="aspect-square w-full flex-shrink-0 overflow-hidden rounded-lg bg-gray-800 shadow-2xl md:w-80">
                    <img id="playlistPageImage" src="https://placehold.co/320x320" alt="Playlist Cover"
                        class="h-full w-full object-cover" loading="lazy" decoding="async" />
                </div>

                <div class="flex-1 w-full">
                    <p class="mb-2 text-sm text-gray-400 font-medium tracking-wider">PLAYLIST</p>
                    <h1 id="playlistPageTitle" class="mb-2 text-3xl font-bold md:text-5xl text-white">Playlist Title
                    </h1>
                    <p class="text-gray-400 text-sm mb-4">
                        <span id="playlistPageCount">0 tracks</span>
                        <span class="mx-1">•</span>
                        <span id="playlistPageDuration">0:00</span>
                    </p>


                    <div class="flex items-center gap-3 mt-2">
                        <button id="playPlaylistPageBtn"
                            class="flex items-center gap-2 rounded-full bg-blue-500 px-8 py-3 font-semibold text-white transition-transform hover:scale-105 hover:bg-blue-400 active:scale-95 shadow-lg shadow-blue-500/20 cursor-pointer">
                            <i data-lucide="play" class="fill-current" style="width: 20px; height: 20px"></i>
                            Play
                        </button>
                        <button id="shufflePlaylistPageBtn"
                            class="flex items-center gap-2 rounded-full border border-purple-500/30 px-6 py-3 text-sm font-semibold text-purple-300 transition-colors hover:border-purple-400 hover:text-purple-200 cursor-pointer">
                            <i data-lucide="shuffle" style="width: 18px; height: 18px"></i>
                            Shuffle
                        </button>
                        <button id="editPlaylistBtn"
                            class="flex items-center gap-2 rounded-full bg-gray-700 px-6 py-3 font-medium text-white transition-colors hover:bg-gray-600 cursor-pointer">
                            <i data-lucide="pencil" style="width: 18px; height: 18px"></i>
                            Edit
                        </button>
                    </div>
                </div>
            </div>


            <div class="space-y-12">

                <section>
                    <h2 class="text-2xl font-semibold text-white mb-4">Tracks</h2>
                    <div class="rounded-2xl border border-gray-800 bg-gray-900/40 p-4">
                        <div id="playlistTracksGrid" class="flex flex-col gap-1">

                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    </div>

    <div id="albumPage"
        class="fixed inset-0 z-[60] bg-gray-900 overflow-y-auto hidden transition-transform duration-300 ease-in-out transform translate-y-full">
        <div class="container mx-auto px-4 py-8 max-w-7xl space-y-6 pb-48 lg:pb-64">
            <div class="w-12 h-1.5 bg-white/20 rounded-full mx-auto mb-6 md:hidden"></div>
            <button id="closeAlbumPageBtn"
                class="flex items-center gap-2 text-gray-400 transition-colors hover:text-white mb-2 cursor-pointer">
                <i data-lucide="arrow-left" style="width: 20px; height: 20px"></i>
                Back
            </button>

            <div class="flex flex-col items-start gap-8 md:flex-row md:items-end">
                <div
                    class="aspect-square w-full flex-shrink-0 overflow-hidden rounded-lg bg-gray-800 shadow-2xl md:w-80 group relative">
                    <img id="albumPageImage" src="https://placehold.co/320x320" alt="Album Cover"
                        class="h-full w-full object-cover" loading="lazy" decoding="async" />
                </div>

                <div class="flex-1 w-full">
                    <p class="mb-2 text-sm text-gray-400 font-medium tracking-wider">ALBUM</p>
                    <h1 id="albumPageTitle" class="mb-2 text-3xl font-bold md:text-5xl text-white">Album Title</h1>

                    <div class="mb-4">
                        <a href="#" id="albumPageArtist"
                            class="text-xl text-gray-300 hover:text-white hover:underline transition-colors">Artist
                            Name</a>
                    </div>

                    <div class="flex flex-wrap items-center gap-4 text-sm text-gray-400 mb-6">
                        <span id="albumPageYear">2024</span>
                        <span class="w-1 h-1 rounded-full bg-gray-600"></span>
                        <span id="albumPageCount">0 tracks</span>
                        <span class="w-1 h-1 rounded-full bg-gray-600"></span>
                        <span id="albumPageDuration">0 min</span>
                    </div>

                    <div class="flex flex-wrap items-center gap-3">
                        <button id="playAlbumPageBtn"
                            class="flex items-center gap-2 rounded-full bg-blue-500 px-8 py-3 font-semibold text-white transition-transform hover:scale-105 hover:bg-blue-400 active:scale-95 shadow-lg shadow-blue-500/20 cursor-pointer">
                            <i data-lucide="play" class="fill-current" style="width: 20px; height: 20px"></i>
                            Play All
                        </button>
                        <button id="shuffleAlbumPageBtn"
                            class="flex items-center gap-2 rounded-full border border-purple-500/30 px-6 py-3 text-sm font-semibold text-purple-300 transition-colors hover:border-purple-400 hover:text-purple-200 cursor-pointer">
                            <i data-lucide="shuffle" style="width: 18px; height: 18px"></i>
                            Shuffle
                        </button>
                    </div>
                </div>
            </div>

            <div class="space-y-12">
                <section>
                    <h2 class="text-2xl font-semibold text-white mb-4">Tracks</h2>
                    <div class="rounded-2xl border border-gray-800 bg-gray-900/40 p-4">
                        <div id="albumTracksGrid" class="flex flex-col gap-1">
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <footer id="appFooter" class="py-8 text-center text-sm text-gray-500">
        <span class="mx-2">made with love by dzunggzz</span>
        <span class="mx-2">•</span>
        <span class="mx-2">check out <a href="https://github.com/uimaxbai/tidal-ui"
                class="underline hover:text-blue-400 transition-colors">uimaxbai</a> and <a
                href="https://github.com/sachinsenal0x64/hifi"
                class="underline hover:text-blue-400 transition-colors">sachinsenal0x64</a> on github</span>
    </footer>

    <div id="pcFullscreenPlayer"
        class="fixed inset-0 z-[100] bg-gray-900 text-white min-h-screen overflow-hidden flex hidden transition-opacity duration-300 opacity-0">
        <div class="absolute inset-0 z-0 pointer-events-none">
            <img id="pcFsBackground" src=""
                class="w-full h-full object-cover opacity-40 blur-[100px] scale-125 saturate-150 transition-opacity duration-700">
            <div class="absolute inset-0 bg-black/40"></div>
        </div>

        <div
            class="relative z-10 w-[35%] h-full flex flex-col justify-center items-left p-12 lg:p-16 border-r border-white/5">
            <button id="closePcFullscreenBtn"
                class="cursor-pointer absolute top-8 left-8 w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors backdrop-blur-md border border-white/5">
                <i data-lucide="minimize-2" class="w-5 h-5 text-white"></i>
            </button>

            <div class="w-full max-w-md space-y-8 flex flex-col items-left text-left">

                <div class="flex flex-col items-left">
                    <h2 class="text-xs font-bold tracking-widest text-white/60 uppercase mb-1">Playing from Album</h2>
                    <span id="pcFsAlbumTitle" class="text-base font-semibold text-white/90">Album Title</span>
                </div>

                <div
                    class="aspect-square w-full rounded-[2rem] shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)] overflow-hidden border border-white/10 relative group">
                    <img id="pcFsArt" src="https://placehold.co/600x600" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none">
                    </div>
                </div>

                <div class="space-y-3 w-full">
                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 mb-2"
                        id="pcFsQualityBadge">
                        <span class="text-[10px] font-bold tracking-widest uppercase text-white/80">LOSSLESS</span>
                    </div>

                    <h1 id="pcFsTitle"
                        class="text-3xl md:text-4xl font-bold tracking-tight leading-tight text-white line-clamp-2">
                        Track Title</h1>

                    <div class="flex flex-col gap-1">
                        <p id="pcFsArtist"
                            class="text-lg text-gray-300 hover:text-white transition-colors cursor-pointer">Artist Name
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="relative z-10 w-[65%] h-full flex flex-col p-12 lg:p-20 bg-black/20 backdrop-blur-sm">

            <div class="flex-1 w-full h-full relative overflow-hidden mask-gradient-b">
                <div id="pcFsLyricsContainer" class="w-full h-full overflow-y-auto custom-scrollbar"></div>
            </div>

            <div class="mt-8 pt-8 border-t border-white/5 w-full">

                <div class="w-full group cursor-pointer mb-6" id="pcFsProgressBarContainer">
                    <div class="flex justify-between text-xs text-gray-400 font-medium font-mono mb-2">
                        <span id="pcFsCurrentTime">0:00</span>
                        <span id="pcFsDuration">0:00</span>
                    </div>
                    <div class="h-1.5 bg-white/10 rounded-full overflow-hidden relative">
                        <div id="pcFsBufferBar"
                            class="absolute inset-y-0 left-0 bg-white/30 w-0 rounded-full transition-all duration-200">
                        </div>
                        <div id="pcFsProgressBar"
                            class="absolute inset-y-0 left-0 bg-white w-0 rounded-full group-hover:bg-blue-400 transition-colors shadow-[0_0_15px_rgba(255,255,255,0.5)]">
                        </div>
                    </div>
                </div>

                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-6">
                        <button id="pcFsShuffleBtn" class="text-white/40 hover:text-white transition-colors cursor-pointer"><i
                                data-lucide="shuffle" class="w-5 h-5"></i></button>
                        <button id="pcFsRepeatBtn" class="text-white/40 hover:text-white transition-colors cursor-pointer"><i
                                data-lucide="repeat" class="w-5 h-5"></i></button>
                    </div>

                    <div class="flex items-center gap-8">
                        <button id="pcFsPrevBtn" class="text-white hover:text-white/80 transition-colors cursor-pointer"><i
                                data-lucide="skip-back" class="w-8 h-8 fill-current"></i></button>
                        <button id="pcFsPlayPauseBtn"
                            class="w-16 h-16 rounded-full bg-white text-black flex items-center justify-center hover:scale-105 transition-transform shadow-[0_0_20px_rgba(255,255,255,0.2)] cursor-pointer">
                            <i data-lucide="play" id="pcFsPlayIcon" class="w-6 h-6 fill-current"></i>
                        </button>
                        <button id="pcFsNextBtn" class="text-white hover:text-white/80 transition-colors cursor-pointer"><i
                                data-lucide="skip-forward" class="w-8 h-8 fill-current"></i></button>
                    </div>

                    <div class="flex items-center gap-4">
                        <button id="pcFsFavoriteBtn" class="text-white/40 hover:text-red-500 transition-colors cursor-pointer"><i
                                data-lucide="heart" class="w-5 h-5"></i></button>
                    </div>
                </div>

            </div>

        </div>
    </div>

    <div class="audio-player-backdrop fixed inset-x-0 bottom-9 z-[200] px-4 pt-16 pb-10 sm:px-6 sm:pt-16 sm:pb-10"
        style="top: auto; padding: 0">
        <div class="relative mx-auto w-full max-w-screen-2xl">
            <div class="audio-player-glass overflow-hidden rounded-2xl border shadow-2xl">
                <div class="relative px-4 py-3">
                    <div class="mb-3">
                        <div class="progress-section">
                            <div id="progressContainer" style="cursor: pointer;">
                                <div id="bufferBar"></div>
                                <div id="progressBar"></div>
                            </div>
                        </div>
                        <div class="mt-1 flex justify-between text-xs text-gray-400">
                            <span id="currentTime">0:00</span>
                            <span id="duration">0:00</span>
                        </div>
                    </div>

                    <div class="flex flex-row gap-4 justify-between sm:flex-row sm:items-center sm:justify-between">
                        <div class="flex min-w-0 items-center gap-3 sm:flex-1">
                            <img id="albumArt" src="https://placehold.co/64x64" alt="album art"
                                class="h-12 w-12 sm:h-16 sm:w-16 rounded object-cover shadow-lg" loading="lazy"
                                decoding="async" />
                            <div class="min-w-0 flex-1">
                                <h3 class="truncate font-semibold text-white" id="songTitle">
                                    —
                                </h3>
                                <a class="truncate text-sm text-gray-400 hover:text-blue-400 hover:underline inline-block cursor-pointer"
                                    id="songArtist">—</a>
                                <p class="text-xs text-gray-500 truncate">
                                    <span id="albumTitle"
                                        class="hover:text-blue-400 hover:underline cursor-pointer transition-colors">—</span>
                                    <span class="mx-1" aria-hidden="true">•</span>
                                    <span id="qualityLabel">—</span>
                                </p>
                            </div>
                        </div>

                        <div class="flex flex-nowrap items-center justify-around gap-2 sm:gap-4">
                            <div class="flex items-center justify-center gap-1 sm:gap-2">
                                <button id="prevBtn"
                                    class="p-1.5 sm:p-2 text-gray-400 transition-colors hover:text-white disabled:opacity-50 cursor-pointer"
                                    title="previous" aria-label="Previous track">
                                    <i data-lucide="skip-back" style="
                                                width: 18px;
                                                height: 18px;
                                            "></i>
                                </button>
                                <button id="playBtn"
                                    class="rounded-full bg-white p-2.5 sm:p-3 text-gray-900 transition-transform hover:scale-105 cursor-pointer"
                                    title="play/pause" aria-label="Play or pause">
                                    <i data-lucide="play" class="play-icon" style="
                                                width: 20px;
                                                height: 20px;
                                            "></i>
                                    <i data-lucide="pause" class="pause-icon" style="
                                                display: none;
                                                width: 20px;
                                                height: 20px;
                                            "></i>
                                </button>
                                <button id="nextBtn"
                                    class="p-1.5 sm:p-2 text-gray-400 transition-colors hover:text-white disabled:opacity-50 cursor-pointer"
                                    title="next" aria-label="Next track">
                                    <i data-lucide="skip-forward" style="
                                                width: 18px;
                                                height: 18px;
                                            "></i>
                                </button>
                            </div>

                            <div class="hidden sm:flex items-center gap-2">
                                <button id="muteBtn" class="p-1 sm:p-2 text-gray-400 transition-colors hover:text-white cursor-pointer"
                                    title="volume" aria-label="Volume control">
                                    <i data-lucide="volume-2" style="
                                                width: 16px;
                                                height: 16px;
                                            "></i>
                                </button>
                                <input id="volumeSlider" type="range" min="0" max="1" step="0.01" value="0.7"
                                    class="h-1 w-16 sm:w-24 cursor-pointer appearance-none rounded-lg bg-gray-700 accent-white"
                                    aria-label="Volume level" />
                            </div>

                            <div class="flex items-center gap-2">
                                <button id="openPcFullscreenBtn"
                                    class="hidden md:block p-1.5 sm:p-2 text-gray-400 hover:text-white transition-colors cursor-pointer"
                                    title="fullscreen" aria-label="Toggle fullscreen">
                                    <i data-lucide="maximize-2" style="width: 18px; height: 18px"></i>
                                </button>
                                <button id="queueBtn" class="hidden md:block p-1.5 sm:p-2 cursor-pointer" title="queue"
                                    aria-label="Toggle queue panel">
                                    <i data-lucide="list-music" style="
                                                width: 16px;
                                                height: 16px;
                                            "></i>
                                    <span id="queueCount" style="display: none !important;">
                                    </span>
                                </button>
                                <button id="equalizerBtn" class="hidden sm:block p-1.5 sm:p-2 cursor-pointer"
                                    title="equalizer" aria-label="Toggle equalizer">
                                    <i data-lucide="sliders" style="
                                                width: 16px;
                                                height: 16px;
                                            "></i>
                                </button>
                                <button id="lyricsBtn" class="hidden md:block p-1.5 sm:p-2 cursor-pointer" title="lyrics"
                                    aria-label="Show lyrics">
                                    <i data-lucide="mic-2" style="
                                                width: 16px;
                                                height: 16px;
                                            "></i>
                                </button>
                                <button id="repeatBtn" class="hidden md:block p-1.5 sm:p-2 cursor-pointer" title="repeat"
                                    aria-label="Toggle repeat mode">
                                    <i data-lucide="repeat" style="
                                                width: 16px;
                                                height: 16px;
                                            "></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <audio id="audio" crossorigin="anonymous"></audio>

    <div id="amLyricsContainer" class="lyrics-overlay fixed inset-0 z-202 hidden flex items-center justify-center p-4">
        <div class="lyrics-panel relative w-full max-w-4xl h-[80vh] flex flex-col">
            <div class="lyrics-header flex items-center justify-between p-5 z-10">
                <div class="lyrics-heading">
                    <h3 class="lyrics-title text-xl font-semibold text-white flex gap-2 items-center">
                        <i data-lucide="music-2" class="w-5 h-5 text-blue-400"></i> Lyrics
                    </h3>
                    <p id="lyricsTrackInfo" class="lyrics-subtitle text-sm text-blue-200/80 mt-1"></p>
                </div>
                <div class="lyrics-header-actions flex items-center gap-2">
                    <button id="closeAmLyrics" class="lyrics-icon-button" title="Close lyrics">
                        <i data-lucide="x" class="w-[18px] h-[18px]"></i>
                    </button>
                </div>
            </div>
            <div class="lyrics-body flex-1 p-4 pt-0 overflow-hidden">
                <div class="lyrics-component-wrapper h-full rounded-xl overflow-hidden">
                    <div id="amLyricsWrapper" class="w-full h-full text-lg overflow-y-auto"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="mobileFullscreenPlayer"
        class="fixed inset-0 z-[60] bg-gray-900 flex flex-col md:hidden transform translate-y-full transition-transform duration-300 ease-in-out">
        <div class="absolute inset-0 z-0">
            <img id="fsPlayerBg" src="" class="w-full h-full object-cover blur-3xl opacity-30" alt="background">
            <div class="absolute inset-0 bg-black/50 backdrop-blur-3xl"></div>
        </div>

        <div class="relative z-10 flex flex-col h-full p-6">

            <div class="flex items-center justify-between mb-8">
                <button id="fsMinimizeBtn" class="text-white/70 hover:text-white">
                    <i data-lucide="chevron-down" class="w-8 h-8"></i>
                </button>
                <div class="text-xs font-bold tracking-widest text-white/50 uppercase">Now Playing</div>
                <button id="fsOptionsBtn" class="text-white/70 hover:text-white">
                    <i data-lucide="more-horizontal" class="w-8 h-8"></i>
                </button>
            </div>

            <div id="fsMainContent" class="flex-1 flex flex-col transition-all duration-300 ease-in-out">
                <div class="flex-1 flex items-center justify-center py-4 transition-all duration-300"
                    id="fsArtContainer">
                    <div class="w-90 h-90 rounded-xl overflow-hidden shadow-2xl shadow-black/50 border border-white/10 relative group transition-all duration-300"
                        id="fsArtWrapper">
                        <img id="fsPlayerImage" src="https://placehold.co/400x400" class="w-full h-full object-cover"
                            alt="Album Art">
                    </div>
                </div>

                <div class="mt-4 mb-6 transition-all duration-300" id="fsInfoContainer">
                    <h2 id="fsPlayerTitle" class="text-2xl font-bold text-white mb-2 line-clamp-1 text-center">Track
                        Title</h2>
                    <p id="fsPlayerArtist" class="text-lg text-gray-400 text-center">Artist Name</p>
                </div>
            </div>

            <div id="fsLyricsContainer" class="hidden flex-1 overflow-y-auto mb-6 rounded-xl relative">
                <div id="fsAmLyricsWrapper" class="w-full h-full text-lg"></div>
            </div>

            <div class="mb-5">
                <div class="relative h-1 bg-white/10 rounded-full mb-2 cursor-pointer group"
                    id="fsProgressBarContainer">
                    <div id="fsBufferBar"
                        class="absolute top-0 left-0 h-full bg-white/30 rounded-full w-0 transition-all duration-200">
                    </div>
                    <div id="fsProgressBar"
                        class="absolute top-0 left-0 h-full bg-white rounded-full w-0 group-hover:bg-blue-400 transition-colors">
                    </div>
                    <div id="fsProgressThumb"
                        class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity"
                        style="left: 0%"></div>
                </div>
                <div class="flex justify-between text-xs font-medium text-gray-500 font-mono">
                    <span id="fsCurrentTime">0:00</span>
                    <span id="fsDuration">0:00</span>
                </div>
            </div>

            <div class="flex items-center justify-between mb-8">
                <button id="fsShuffleBtn" class="text-gray-400 hover:text-white transition-colors">
                    <i data-lucide="shuffle" class="w-5 h-5"></i>
                </button>
                <div class="flex items-center gap-6">
                    <button id="fsPrevBtn" class="text-white hover:text-blue-400 transition-colors">
                        <i data-lucide="skip-back" class="w-8 h-8 fill-current"></i>
                    </button>
                    <button id="fsPlayPauseBtn"
                        class="w-16 h-16 rounded-full bg-white text-black flex items-center justify-center hover:scale-105 transition-transform shadow-lg shadow-white/20">
                        <i data-lucide="play" class="w-8 h-8 fill-current" id="fsPlayIcon"></i>
                    </button>
                    <button id="fsNextBtn" class="text-white hover:text-blue-400 transition-colors">
                        <i data-lucide="skip-forward" class="w-8 h-8 fill-current"></i>
                    </button>
                </div>
                <button id="fsRepeatBtn" class="text-gray-400 hover:text-white transition-colors">
                    <i data-lucide="repeat" class="w-5 h-5"></i>
                </button>
            </div>

            <div class="flex items-center justify-between px-4">
                <button id="fsLyricsBtn" class="text-gray-400 hover:text-white">
                    <i data-lucide="mic-2" class="w-5 h-5"></i>
                </button>
                <button id="fsFavoriteBtn" class="text-gray-400 hover:text-red-500 transition-colors">
                    <i data-lucide="heart" class="w-6 h-6"></i>
                </button>
                <button id="fsQueueBtn" class="text-gray-400 hover:text-white">
                    <i data-lucide="list-music" class="w-5 h-5"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="mobileQueueModal"
        class="fixed inset-x-0 bottom-0 z-[70] bg-gray-900 rounded-t-3xl border-t border-white/10 flex flex-col max-h-[80vh] transform translate-y-full transition-transform duration-300 ease-in-out md:hidden">
        <div class="w-12 h-1.5 bg-white/20 rounded-full mx-auto mt-3 mb-1"></div>
        <div class="flex items-center justify-between p-6 border-b border-white/5">
            <h3 class="text-xl font-bold text-white flex items-center gap-2">
                <i data-lucide="list-music" class="w-5 h-5 text-blue-400"></i> Queue
            </h3>
            <button id="closeMobileQueueBtn" class="p-2 text-gray-400 hover:text-white bg-white/5 rounded-full">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>
        <div class="p-4 overflow-y-auto flex-1" id="mobileQueueList">
        </div>
    </div>

    <div id="fsOptionsModal"
        class="fixed inset-x-0 bottom-0 z-[80] bg-gray-900 rounded-t-3xl border-t border-white/10 flex flex-col transform translate-y-full transition-transform duration-300 ease-in-out md:hidden">
        <div class="w-12 h-1.5 bg-white/20 rounded-full mx-auto mt-3 mb-1"></div>
        <div class="p-6 border-b border-white/5 flex items-center gap-4">
            <img id="fsOptionsArt" src="" class="w-16 h-16 rounded-lg object-cover bg-white/5">
            <div class="flex-1 min-w-0">
                <h3 id="fsOptionsTitle" class="text-white font-bold truncate">Title</h3>
                <p id="fsOptionsArtist" class="text-gray-400 text-sm truncate">Artist</p>
            </div>
            <button id="closeFsOptionsBtn" class="p-2 text-gray-400 hover:text-white bg-white/5 rounded-full">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>
        <div class="p-4 flex flex-col gap-2">
            <button id="fsOptionArtist"
                class="flex items-center gap-4 p-4 hover:bg-white/5 rounded-xl transition-colors text-white text-left">
                <i data-lucide="user" class="w-6 h-6 text-gray-400"></i>
                <span class="font-medium">View Artist</span>
            </button>
            <button id="fsOptionAlbum"
                class="flex items-center gap-4 p-4 hover:bg-white/5 rounded-xl transition-colors text-white text-left">
                <i data-lucide="disc" class="w-6 h-6 text-gray-400"></i>
                <span class="font-medium">View Album</span>
            </button>
            <button id="fsOptionAdd"
                class="flex items-center gap-4 p-4 hover:bg-white/5 rounded-xl transition-colors text-white text-left">
                <i data-lucide="plus-circle" class="w-6 h-6 text-gray-400"></i>
                <span class="font-medium">Add to Playlist</span>
            </button>
        </div>
    </div>

    <div id="queueModal" class="modal-overlay fixed inset-0 z-70 hidden flex items-center justify-center p-4">
        <div class="modal-panel max-w-3xl w-full max-h-[80vh] flex flex-col">
            <div class="modal-header flex items-center justify-between p-5">
                <h3 class="modal-title text-xl font-semibold text-white flex items-center gap-2">
                    <i data-lucide="list-music" class="w-5 h-5 text-blue-400"></i> Playback Queue
                </h3>
                <button id="closeQueueModal" class="modal-icon-button" title="Close">
                    <i data-lucide="x" class="w-[18px] h-[18px]"></i>
                </button>
            </div>
            <div class="p-4 overflow-y-auto max-h-[60vh]">
                <div class="space-y-3">
                    <div class="flex items-center justify-between gap-2">
                        <div class="flex items-center gap-2 text-gray-300">
                            <i data-lucide="list-music" style="width: 18px; height: 18px"></i>
                            <span class="font-medium">Playback Queue</span>
                            <span class="rounded-full bg-gray-800 px-2 py-0.5 text-xs text-gray-400"
                                id="queueLength">0</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="shuffleBtn"
                                class="flex items-center gap-1 rounded-full border border-transparent px-3 py-1 text-xs tracking-wide text-gray-400 uppercase transition-colors hover:border-blue-500 hover:text-blue-200"
                                title="shuffle" aria-label="Shuffle queue">
                                <i data-lucide="shuffle" style="width: 14px; height: 14px"></i>
                                Shuffle
                            </button>
                            <button id="clearBtn"
                                class="flex items-center gap-1 rounded-full border border-transparent px-3 py-1 text-xs tracking-wide text-gray-400 uppercase transition-colors hover:border-red-500 hover:text-red-400"
                                title="clear" aria-label="Clear queue">
                                <i data-lucide="trash-2" style="width: 14px; height: 14px"></i>
                                Clear
                            </button>
                        </div>
                    </div>
                    <div id="queueListContainer">
                        <p
                            class="rounded-lg border border-dashed border-gray-700 bg-gray-900/70 px-3 py-8 text-center text-gray-400">
                            Queue is empty</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>



    </div>



    <div id="equalizerModal" class="modal-overlay fixed inset-0 z-70 hidden flex items-center justify-center p-4">
        <div class="modal-panel max-w-7xl w-full max-h-[80vh] flex flex-col">
            <div class="modal-header flex items-center justify-between p-5">
                <h3 class="modal-title text-xl font-semibold text-white flex items-center gap-2">
                    <i data-lucide="sliders" class="w-5 h-5 text-blue-400"></i> Equalizer
                </h3>
                <div class="flex items-center gap-3">
                     <select id="eqPresetSelect" class="cursor-pointer bg-gray-800 text-white text-sm rounded-lg px-3 py-1.5 border border-white/10 focus:outline-none focus:border-blue-500">
                        <option value="flat">Flat</option>
                        <option value="bass-boost">Bass Boost</option>
                        <option value="bass-reduce">Bass Reduce</option>
                        <option value="vocals">Bright Vocals</option>
                        <option value="treble-boost">Treble Boost</option>
                        <option value="electronic">Electronic</option>
                        <option value="acoustic">Acoustic</option>
                     </select>
                     <button id="closeEqualizerModal" class="modal-icon-button" title="Close">
                        <i data-lucide="x" class="w-[18px] h-[18px]"></i>
                     </button>
                </div>
            </div>
            <div class="p-4">
                <div id="equalizerContainer">
                    <weq8-ui class="p-4"></weq8-ui>
                </div>
            </div>
        </div>
    </div>

    <div id="keyboardShortcutsModal"
        class="modal-overlay fixed inset-0 z-[60] hidden flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm transition-opacity duration-300">
        <div
            class="modal-panel w-full max-w-sm bg-gray-900 border border-white/10 rounded-xl shadow-2xl transform scale-95 opacity-0 transition-all duration-200 overflow-hidden">
            <div class="px-4 py-3 border-b border-white/10 flex items-center justify-between bg-white/5">
                <h3 class="text-sm font-bold text-white flex items-center gap-2">
                    <i data-lucide="keyboard" class="w-4 h-4 text-blue-400"></i> Keyboard Shortcuts
                </h3>
                <button id="closeKeyboardModal"
                    class="p-1 rounded-full text-gray-400 hover:bg-white/10 hover:text-white transition-colors cursor-pointer">
                    <i data-lucide="x" class="w-4 h-4"></i>
                </button>
            </div>
            
            <div class="p-2 max-h-[70vh] overflow-y-auto custom-scrollbar">

                <div class="px-3 py-2 text-[10px] font-bold text-gray-500 uppercase tracking-widest">Playback</div>
                
                <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-white/5 group transition-colors">
                    <span class="text-sm text-gray-300 group-hover:text-white transition-colors">Play / Pause</span>
                    <kbd class="px-2 py-1 text-[10px] font-mono font-bold text-gray-400 bg-white/5 border border-white/10 rounded min-w-[1.5rem] text-center">Space</kbd>
                </div>

                <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-white/5 group transition-colors">
                    <span class="text-sm text-gray-300 group-hover:text-white transition-colors">Seek Forward</span>
                    <div class="flex gap-1">
                        <kbd class="px-2 py-1 text-[10px] font-mono font-bold text-gray-400 bg-white/5 border border-white/10 rounded min-w-[1.5rem] text-center">→</kbd>
                    </div>
                </div>

                <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-white/5 group transition-colors">
                    <span class="text-sm text-gray-300 group-hover:text-white transition-colors">Seek Backward</span>
                    <div class="flex gap-1">
                        <kbd class="px-2 py-1 text-[10px] font-mono font-bold text-gray-400 bg-white/5 border border-white/10 rounded min-w-[1.5rem] text-center">←</kbd>
                    </div>
                </div>

                <div class="h-px bg-white/5 my-1"></div>

                <div class="px-3 py-2 text-[10px] font-bold text-gray-500 uppercase tracking-widest">Tools</div>
                
                <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-white/5 group transition-colors">
                    <span class="text-sm text-gray-300 group-hover:text-white transition-colors">Volume Up</span>
                    <kbd class="px-2 py-1 text-[10px] font-mono font-bold text-gray-400 bg-white/5 border border-white/10 rounded min-w-[1.5rem] text-center">↑</kbd>
                </div>

                <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-white/5 group transition-colors">
                    <span class="text-sm text-gray-300 group-hover:text-white transition-colors">Volume Down</span>
                    <kbd class="px-2 py-1 text-[10px] font-mono font-bold text-gray-400 bg-white/5 border border-white/10 rounded min-w-[1.5rem] text-center">↓</kbd>
                </div>

                <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-white/5 group transition-colors">
                    <span class="text-sm text-gray-300 group-hover:text-white transition-colors">Mute</span>
                    <kbd class="px-2 py-1 text-[10px] font-mono font-bold text-gray-400 bg-white/5 border border-white/10 rounded min-w-[1.5rem] text-center">M</kbd>
                </div>

                <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-white/5 group transition-colors">
                    <span class="text-sm text-gray-300 group-hover:text-white transition-colors">Search</span>
                    <kbd class="px-2 py-1 text-[10px] font-mono font-bold text-gray-400 bg-white/5 border border-white/10 rounded min-w-[1.5rem] text-center">/</kbd>
                </div>
            </div>
        </div>
    </div>



    <script type="module" src="./scripts/firebase.js"></script>
    <script type="module">
        import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { PlayerActions } from "./scripts/playerActions.js";

        onAuthStateChanged(window.auth, (user) => {
            if (!user) {
                window.location.href = "login.html";
            }
        });

        document.getElementById('settingsLogoutBtn').addEventListener('click', async function () {
            try {
                await signOut(window.auth);
                window.location.href = 'login.html';
            } catch (error) {
                console.error('Error signing out:', error);
            }
        });

        document.addEventListener("DOMContentLoaded", function () {
            lucide.createIcons();
            updateRepeatButton();

            const minimizeBtn = document.getElementById('minimizeBtn');
            const playerBackdrop = document.querySelector('.audio-player-backdrop');
            const minimizeIcon = document.querySelector('.minimize-icon');
            const maximizeIcon = document.querySelector('.maximize-icon');

            let isMinimized = false;

            if (minimizeBtn) {
                minimizeBtn.addEventListener('click', function () {
                    isMinimized = !isMinimized;

                    if (isMinimized) {
                        playerBackdrop.classList.add('minimized');
                        minimizeIcon.style.display = 'none';
                        maximizeIcon.style.display = 'flex';
                        minimizeBtn.setAttribute('title', 'maximize player');
                        minimizeBtn.setAttribute('aria-label', 'Maximize player');
                    } else {
                        playerBackdrop.classList.remove('minimized');
                        minimizeIcon.style.display = 'flex';
                        maximizeIcon.style.display = 'none';
                        minimizeBtn.setAttribute('title', 'minimize player');
                        minimizeBtn.setAttribute('aria-label', 'Minimize player');
                    }
                });
            }
        });
    </script>
    <script type="module">
        import { WEQ8Runtime } from "./weq8-main/dist/runtime.js";
        import "./weq8-main/dist/ui.js";
        import { applyPreset } from "./scripts/eqPresets.js";

        window.WEQ8Runtime = WEQ8Runtime;

        document.addEventListener("DOMContentLoaded", () => {
             const audio = document.getElementById("audio");
             let audioCtx = new (window.AudioContext || window.webkitAudioContext)();
             let audioSource;
             try {
                audioSource = audioCtx.createMediaElementSource(audio);
             } catch (e) {
                console.warn("MediaElementSource creation failed, might already exist", e);
             }

             const weq8 = new WEQ8Runtime(audioCtx);
             
             if (audioSource) {
                 audioSource.connect(weq8.input);
                 weq8.connect(audioCtx.destination);
             }
             const weq8Ui = document.querySelector("weq8-ui");
             if (weq8Ui) {
                 weq8Ui.runtime = weq8;
             }
             
             const presetSelect = document.getElementById("eqPresetSelect");
             if (presetSelect) {
                 presetSelect.addEventListener("change", (e) => {
                     applyPreset(weq8, e.target.value);
                 });
             }
             
             document.addEventListener('click', () => {
                 if (audioCtx.state === 'suspended') {
                     audioCtx.resume();
                 }
             }, { once: true });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script type="module" src="./scripts/contextMenu.js"></script>
    <script type="module" src="./scripts/API.js"></script>
    <div id="toast-container" class="fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none p-4"></div>
</body>

</html>